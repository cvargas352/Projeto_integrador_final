(function(){let h=null,c=[];async function l(){try{const r=await fetch('/api/items');if(!r.ok)throw new Error('Erro buscar');c=await r.json();h?.onDataChanged?.(c);return{isOk:true}}catch(e){return{isOk:false}}}async function i(x){h=x;return await l()}async function create(o){try{const r=await fetch('/api/items',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(o)});if(!r.ok)return{isOk:false};c.push(o);h?.onDataChanged?.(c);return{isOk:true}}catch(e){return{isOk:false}}}async function update(o){try{const r=await fetch(`/api/items/${o.id}`,{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(o)});if(!r.ok)return{isOk:false};const idx=c.findIndex(i=>i.id===o.id);if(idx!=-1)c[idx]=o;else c.push(o);h?.onDataChanged?.(c);return{isOk:true}}catch(e){return{isOk:false}}}window.dataSdk={init:i,create,update};})();